{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { Store } from '@ngrx/store';\nimport { FileService } from '../../../core/services/file.service';\nimport * as FileActions from '../../../store/actions/file.actions';\nimport * as FileSelectors from '../../../store/selectors/file.selectors';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"../../../core/services/file.service\";\nimport * as i3 from \"@angular/common\";\nfunction FileListComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 7);\n    i0.…µ…µtext(1, \"Loading...\");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction FileListComponent_div_8_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"span\");\n    i0.…µ…µtext(3);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(4, \"div\", 13)(5, \"h3\");\n    i0.…µ…µtext(6);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(7, \"p\");\n    i0.…µ…µtext(8);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(9, \"p\", 14);\n    i0.…µ…µtext(10);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(11, \"p\", 14);\n    i0.…µ…µtext(12);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(13, \"div\", 15)(14, \"button\", 16);\n    i0.…µ…µlistener(\"click\", function FileListComponent_div_8_div_1_Template_button_click_14_listener() {\n      const file_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r2.downloadFile(file_r2));\n    });\n    i0.…µ…µtext(15, \"Download\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(16, \"button\", 16);\n    i0.…µ…µlistener(\"click\", function FileListComponent_div_8_div_1_Template_button_click_16_listener() {\n      const file_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r2.viewFile(file_r2));\n    });\n    i0.…µ…µtext(17, \"View\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(18, \"button\", 17);\n    i0.…µ…µlistener(\"click\", function FileListComponent_div_8_div_1_Template_button_click_18_listener() {\n      const file_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r2.deleteFile(file_r2.id));\n    });\n    i0.…µ…µtext(19, \"Delete\");\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const file_r2 = ctx.$implicit;\n    const ctx_r2 = i0.…µ…µnextContext(2);\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate(ctx_r2.getFileIcon(file_r2.fileExtension));\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate(file_r2.originalFileName);\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(ctx_r2.formatFileSize(file_r2.fileSize));\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate1(\"Downloads: \", file_r2.downloadCount, \"\");\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(ctx_r2.formatDate(file_r2.createdAt));\n  }\n}\nfunction FileListComponent_div_8_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 18)(1, \"p\");\n    i0.…µ…µtext(2, \"No files uploaded yet\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"button\", 2);\n    i0.…µ…µlistener(\"click\", function FileListComponent_div_8_div_2_Template_button_click_3_listener() {\n      i0.…µ…µrestoreView(_r4);\n      const ctx_r2 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r2.openUploadModal());\n    });\n    i0.…µ…µtext(4, \"Upload your first file\");\n    i0.…µ…µelementEnd()();\n  }\n}\nfunction FileListComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 8);\n    i0.…µ…µtemplate(1, FileListComponent_div_8_div_1_Template, 20, 5, \"div\", 9)(2, FileListComponent_div_8_div_2_Template, 5, 0, \"div\", 10);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const filesData_r5 = ctx.ngIf;\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngForOf\", filesData_r5.content);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", filesData_r5.content.length === 0);\n  }\n}\nfunction FileListComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 19)(1, \"button\", 20);\n    i0.…µ…µlistener(\"click\", function FileListComponent_div_10_Template_button_click_1_listener() {\n      i0.…µ…µrestoreView(_r6);\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.previousPage());\n    });\n    i0.…µ…µtext(2, \"Previous\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"span\");\n    i0.…µ…µtext(4);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(5, \"button\", 20);\n    i0.…µ…µlistener(\"click\", function FileListComponent_div_10_Template_button_click_5_listener() {\n      i0.…µ…µrestoreView(_r6);\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.nextPage());\n    });\n    i0.…µ…µtext(6, \"Next\");\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const filesData_r7 = ctx.ngIf;\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"disabled\", filesData_r7.first);\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate2(\"Page \", filesData_r7.pageNumber + 1, \" of \", filesData_r7.totalPages, \"\");\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"disabled\", filesData_r7.last);\n  }\n}\nfunction FileListComponent_div_12_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 28);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.…µ…µnextContext(2);\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate2(\" Selected: \", ctx_r2.selectedFile.name, \" (\", ctx_r2.formatFileSize(ctx_r2.selectedFile.size), \") \");\n  }\n}\nfunction FileListComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 21);\n    i0.…µ…µlistener(\"click\", function FileListComponent_div_12_Template_div_click_0_listener() {\n      i0.…µ…µrestoreView(_r8);\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.closeUploadModal());\n    });\n    i0.…µ…µelementStart(1, \"div\", 22);\n    i0.…µ…µlistener(\"click\", function FileListComponent_div_12_Template_div_click_1_listener($event) {\n      i0.…µ…µrestoreView(_r8);\n      return i0.…µ…µresetView($event.stopPropagation());\n    });\n    i0.…µ…µelementStart(2, \"h2\");\n    i0.…µ…µtext(3, \"Upload File\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(4, \"input\", 23);\n    i0.…µ…µlistener(\"change\", function FileListComponent_div_12_Template_input_change_4_listener($event) {\n      i0.…µ…µrestoreView(_r8);\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.onFileSelected($event));\n    });\n    i0.…µ…µelementEnd();\n    i0.…µ…µtemplate(5, FileListComponent_div_12_div_5_Template, 2, 2, \"div\", 24);\n    i0.…µ…µelementStart(6, \"div\", 25)(7, \"button\", 26);\n    i0.…µ…µlistener(\"click\", function FileListComponent_div_12_Template_button_click_7_listener() {\n      i0.…µ…µrestoreView(_r8);\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.uploadFile());\n    });\n    i0.…µ…µtext(8, \"Upload\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(9, \"button\", 27);\n    i0.…µ…µlistener(\"click\", function FileListComponent_div_12_Template_button_click_9_listener() {\n      i0.…µ…µrestoreView(_r8);\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.closeUploadModal());\n    });\n    i0.…µ…µtext(10, \"Cancel\");\n    i0.…µ…µelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(5);\n    i0.…µ…µproperty(\"ngIf\", ctx_r2.selectedFile);\n    i0.…µ…µadvance(2);\n    i0.…µ…µproperty(\"disabled\", !ctx_r2.selectedFile);\n  }\n}\nexport let FileListComponent = /*#__PURE__*/(() => {\n  class FileListComponent {\n    constructor(store, fileService) {\n      this.store = store;\n      this.fileService = fileService;\n      this.currentPage = 0;\n      this.pageSize = 10;\n      this.showUploadModal = false;\n      this.selectedFile = null;\n      this.files$ = this.store.select(FileSelectors.selectFiles);\n      this.loading$ = this.store.select(FileSelectors.selectFilesLoading);\n    }\n    ngOnInit() {\n      this.loadFiles();\n    }\n    loadFiles() {\n      this.store.dispatch(FileActions.loadFiles({\n        page: this.currentPage,\n        size: this.pageSize,\n        sortBy: 'createdAt',\n        sortDir: 'desc'\n      }));\n    }\n    openUploadModal() {\n      this.showUploadModal = true;\n    }\n    closeUploadModal() {\n      this.showUploadModal = false;\n      this.selectedFile = null;\n    }\n    onFileSelected(event) {\n      this.selectedFile = event.target.files[0];\n    }\n    uploadFile() {\n      if (this.selectedFile) {\n        this.store.dispatch(FileActions.uploadFile({\n          file: this.selectedFile\n        }));\n        this.closeUploadModal();\n        setTimeout(() => this.loadFiles(), 1000);\n      }\n    }\n    downloadFile(file) {\n      this.fileService.downloadFile(file.id, file.originalFileName).subscribe(blob => {\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = file.originalFileName;\n        a.click();\n        window.URL.revokeObjectURL(url);\n      });\n    }\n    viewFile(file) {\n      this.fileService.downloadFile(file.id, file.originalFileName).subscribe(blob => {\n        const url = window.URL.createObjectURL(blob);\n        window.open(url, '_blank');\n      });\n    }\n    deleteFile(id) {\n      if (confirm('Are you sure you want to delete this file?')) {\n        this.store.dispatch(FileActions.deleteFile({\n          id\n        }));\n      }\n    }\n    nextPage() {\n      this.currentPage++;\n      this.loadFiles();\n    }\n    previousPage() {\n      this.currentPage--;\n      this.loadFiles();\n    }\n    formatFileSize(bytes) {\n      return this.fileService.formatFileSize(bytes);\n    }\n    formatDate(date) {\n      return new Date(date).toLocaleDateString();\n    }\n    getFileIcon(extension) {\n      const icons = {\n        pdf: 'üìÑ',\n        doc: 'üìù',\n        docx: 'üìù',\n        txt: 'üìÉ',\n        jpg: 'üñºÔ∏è',\n        jpeg: 'üñºÔ∏è',\n        png: 'üñºÔ∏è',\n        gif: 'üñºÔ∏è',\n        json: 'üìã',\n        csv: 'üìä',\n        xlsx: 'üìä'\n      };\n      return icons[extension?.toLowerCase()] || 'üìé';\n    }\n    static {\n      this.…µfac = function FileListComponent_Factory(t) {\n        return new (t || FileListComponent)(i0.…µ…µdirectiveInject(i1.Store), i0.…µ…µdirectiveInject(i2.FileService));\n      };\n    }\n    static {\n      this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n        type: FileListComponent,\n        selectors: [[\"app-file-list\"]],\n        standalone: true,\n        features: [i0.…µ…µStandaloneFeature],\n        decls: 13,\n        vars: 10,\n        consts: [[1, \"file-list-container\"], [1, \"header\"], [1, \"btn-upload\", 3, \"click\"], [\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"files-grid\", 4, \"ngIf\"], [\"class\", \"pagination\", 4, \"ngIf\"], [\"class\", \"modal-overlay\", 3, \"click\", 4, \"ngIf\"], [1, \"loading\"], [1, \"files-grid\"], [\"class\", \"file-card\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [1, \"file-card\"], [1, \"file-icon\"], [1, \"file-info\"], [1, \"file-meta\"], [1, \"file-actions\"], [1, \"btn-action\", 3, \"click\"], [1, \"btn-danger\", 3, \"click\"], [1, \"empty-state\"], [1, \"pagination\"], [1, \"btn-page\", 3, \"click\", \"disabled\"], [1, \"modal-overlay\", 3, \"click\"], [1, \"modal-content\", 3, \"click\"], [\"type\", \"file\", \"accept\", \"*/*\", 3, \"change\"], [\"class\", \"selected-file\", 4, \"ngIf\"], [1, \"modal-actions\"], [1, \"btn-primary\", 3, \"click\", \"disabled\"], [1, \"btn-secondary\", 3, \"click\"], [1, \"selected-file\"]],\n        template: function FileListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.…µ…µelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n            i0.…µ…µtext(3, \"My Files\");\n            i0.…µ…µelementEnd();\n            i0.…µ…µelementStart(4, \"button\", 2);\n            i0.…µ…µlistener(\"click\", function FileListComponent_Template_button_click_4_listener() {\n              return ctx.openUploadModal();\n            });\n            i0.…µ…µtext(5, \" + Upload File \");\n            i0.…µ…µelementEnd()();\n            i0.…µ…µtemplate(6, FileListComponent_div_6_Template, 2, 0, \"div\", 3);\n            i0.…µ…µpipe(7, \"async\");\n            i0.…µ…µtemplate(8, FileListComponent_div_8_Template, 3, 2, \"div\", 4);\n            i0.…µ…µpipe(9, \"async\");\n            i0.…µ…µtemplate(10, FileListComponent_div_10_Template, 7, 4, \"div\", 5);\n            i0.…µ…µpipe(11, \"async\");\n            i0.…µ…µtemplate(12, FileListComponent_div_12_Template, 11, 2, \"div\", 6);\n            i0.…µ…µelementEnd();\n          }\n          if (rf & 2) {\n            i0.…µ…µadvance(6);\n            i0.…µ…µproperty(\"ngIf\", i0.…µ…µpipeBind1(7, 4, ctx.loading$));\n            i0.…µ…µadvance(2);\n            i0.…µ…µproperty(\"ngIf\", i0.…µ…µpipeBind1(9, 6, ctx.files$));\n            i0.…µ…µadvance(2);\n            i0.…µ…µproperty(\"ngIf\", i0.…µ…µpipeBind1(11, 8, ctx.files$));\n            i0.…µ…µadvance(2);\n            i0.…µ…µproperty(\"ngIf\", ctx.showUploadModal);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf, i3.AsyncPipe],\n        styles: [\".file-list-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{color:#333;font-size:2rem}.btn-upload[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:4px;cursor:pointer;font-size:1rem}.btn-upload[_ngcontent-%COMP%]:hover{background:#5568d3}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666}.files-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;margin-bottom:2rem}.file-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000001a;transition:transform .2s}.file-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 8px #00000026}.file-icon[_ngcontent-%COMP%]{font-size:3rem;text-align:center;margin-bottom:1rem}.file-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#333;font-size:1.125rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;color:#666}.file-meta[_ngcontent-%COMP%]{font-size:.875rem;color:#999}.file-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem}.btn-action[_ngcontent-%COMP%]{flex:1;padding:.5rem;background:#667eea;color:#fff;border:none;border-radius:4px;cursor:pointer}.btn-action[_ngcontent-%COMP%]:hover{background:#5568d3}.btn-danger[_ngcontent-%COMP%]{flex:1;padding:.5rem;background:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer}.btn-danger[_ngcontent-%COMP%]:hover{background:#c82333}.empty-state[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:4rem 2rem;color:#666}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem}.btn-page[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#667eea;color:#fff;border:none;border-radius:4px;cursor:pointer}.btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;max-width:500px;width:90%}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem}.modal-content[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{margin:1rem 0}.selected-file[_ngcontent-%COMP%]{margin:1rem 0;padding:.75rem;background:#f8f9fa;border-radius:4px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1.5rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{flex:1;padding:.75rem;border:none;border-radius:4px;cursor:pointer;font-size:1rem}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}\"]\n      });\n    }\n  }\n  return FileListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}